<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="version" content="1746822968491"><title>Hexo NexT 博客主题美化 - 终末地铁</title><link rel="stylesheet" href="/css/style.css?v=1746822968491"><link rel="shortcut icon" href="/images/favicon.ico?v=1746822968491" type="image/x-icon"><link rel="icon" href="/images/favicon.ico?v=1746822968491" type="image/x-icon"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/vs.min.css"><script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/core.min.js"></script><script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/javascript.min.js"></script><script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/css.min.js"></script><script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/scss.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="终末地铁" type="application/atom+xml"></head><body><div id="container"><div id="headerArea"><div id="header"><h1 class="site-title">终末地铁</h1></div><nav id="navbar"><ul><li><a href="/">首页</a></li><li><a href="/archives/">归档</a></li><li><a href="/articles/">文章</a></li><li><a href="/atom.xml">订阅</a></li></ul></nav></div><div id="flex"><div id="leftColumn"><aside id="aboutmeSidebar"><h2>关于我</h2><div class="inner"><img src="/images/avatar.png" alt="aboutme Avatar"><p>你可以叫我：右赤<br><img src="https://teppyslayouts.neocities.org/img/dividers/div-fleur.png" alt="divider" class="divider"><br>目前喜欢：视觉小说（非galgame），写作（盲目地，也许因为我对阅读并不狂热，甚至算不上爱好）。<br><img src="https://teppyslayouts.neocities.org/img/dividers/div-fleur.png" alt="divider" class="divider"><br>我很欣赏作词家秋元康，他创办的欅坂46是我最喜欢的偶像团体，歌词占很大一部分原因。<br><img src="https://teppyslayouts.neocities.org/img/dividers/div-fleur.png" alt="divider" class="divider"><br>就先这样吧，以后想到再更新(^▽^ )</p><br><img src="https://web.archive.org/web/20090829061459/http://geocities.com/reyjascats/cat-relaxing.gif" alt="divider" class="divider"></div></aside><aside id="toolsSidebar"><h2>传送门</h2><ul><li><a target="_blank" rel="noopener" href="https://goblin-heart.net/sadgrl/projects/layout-builder/">Sadgrl's Layout Builder</a></li><li><a target="_blank" rel="noopener" href="https://fonts.zeoseven.com/">ZSFT</a></li><li><a target="_blank" rel="noopener" href="https://gifypet.neocities.org/">GIFY PET</a></li><li><a target="_blank" rel="noopener" href="https://gifcities.org/">GifCities</a></li><li><a target="_blank" rel="noopener" href="https://benisland.neocities.org/petpet/">PetPet Generator</a></li><li><a target="_blank" rel="noopener" href="https://neocities.org/">Neocities</a></li></ul></aside></div><main><h1>Hexo NexT 博客主题美化</h1><div class="post-content"><p>给Hexo博客换了nexT主题，由于8.0版本的部分美化教程在网上很难找到，所以直接自己动手拆文件改完了。</p><p>非技术党，代码全部由chatgpt生成，主题风格是Pisces，感兴趣的可以试一下。</p><span id="more"></span><div class="toc"><ul><li><a href="#%E4%BF%AE%E6%94%B9%E5%A4%B4%E9%83%A8%E6%A0%87%E9%A2%98%E6%A0%8F%E8%83%8C%E6%99%AF%E8%89%B2">修改头部标题栏背景色</a></li><li><a href="#%E5%9C%A8%E5%A4%B4%E9%83%A8%E6%A0%87%E9%A2%98%E6%A0%8F%E6%B7%BB%E5%8A%A0%E6%96%87%E5%AD%97">在头部标题栏添加文字</a></li><li><a href="#%E8%AE%BE%E7%BD%AE%E5%8D%9A%E5%AE%A2%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87">设置博客背景图片</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%BC%BA%E8%B0%83%E8%89%B2">修改侧边栏强调色</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E8%B6%85%E9%93%BE%E6%8E%A5%E9%A2%9C%E8%89%B2">修改超链接颜色</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E5%8D%9A%E5%AE%A2%E5%AD%97%E4%BD%93%E6%A0%B7%E5%BC%8F">修改博客字体样式</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E6%A0%B7%E5%BC%8F">修改文章标题样式</a></li><li><a href="#%E7%BB%99%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0-top-%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6">给博客添加 top 文章置顶</a></li></ul></div>## 修改头部标题栏背景色 打开 `博客根目录\themes\next\source\css\_variables\base.styl` 文件，查找 `theme-color` 并找到以下内容修改对应颜色码。<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">//原theme-color  = convert(hexo-config(&#x27;theme_color.light&#x27;));</span><br><span class="hljs-variable">$theme-color</span>                  = 对应颜色码;<br><span class="hljs-variable">$theme-color-dark</span>             = <span class="hljs-built_in">convert</span>(hexo-config(&#x27;theme_color.dark&#x27;));<br></code></pre></td></tr></table></figure><p><code>$theme-color-dark</code> 为夜间模式，也可以修改。</p><h2><span id="在头部标题栏添加文字">在头部标题栏添加文字</span></h2><p>打开 <code>博客根目录\themes\next\layout\_partials\header\brand.njk</code> 文件，查找 <code>site-subtitle</code> 并修改以下代码。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;site-subtitle&quot;</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;description&quot;</span>&gt;</span>文字内容<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><h2><span id="设置博客背景图片">设置博客背景图片</span></h2><p>打开 <code>博客根目录\themes\next\source\css\_schemes\Pisces\index.styl</code> 文件，查找 <code>.main-inner &#123;</code> 并在<strong>上方</strong>添加以下代码。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">background</span>:<span class="hljs-built_in">url</span>(背景图片url);<br>  <span class="hljs-attribute">background-attachment</span>: fixed;<br>&#125;<br></code></pre></td></tr></table></figure><p>url地址可以直接填网图，也可以将图片放在 <code>博客根目录\themes\next\source\images</code> 文件夹内并填入对应路径。</p><h2><span id="修改侧边栏强调色">修改侧边栏强调色</span></h2><p><em>针对点进文章后，对鼠标点击&#x2F;悬浮在<strong>文章目录</strong>和<strong>站点概括</strong>时的强调色进行修改。</em></p><p>打开 <code>博客根目录\themes\next\source\css\_variables\Pisces.styl</code> 文件，查找 <code>$sidebar-nav-color</code> ，修改以下内容。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// Sidebar</span><br><span class="hljs-comment">// --------------------------------------------------</span><br><span class="hljs-variable">$sidebar-nav-color</span>                = <span class="hljs-selector-tag">var</span>(--text-color);<br><span class="hljs-variable">$sidebar-nav-hover-color</span>          = 对应颜色码;<br><span class="hljs-variable">$sidebar-highlight</span>                = 对应颜色码;<br></code></pre></td></tr></table></figure><p><code>$sidebar-nav-hover-color</code> 为鼠标悬浮时的强调色。<br><code>$sidebar-highlight</code> 为鼠标点击时的强调色。</p><h2><span id="修改超链接颜色">修改超链接颜色</span></h2><p>打开 <code>博客根目录\themes\next\source\css\_common\components\post\index.styl</code> 文件，在最下方添加以下代码。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-class">.post-body</span> <span class="hljs-selector-tag">p</span> <span class="hljs-selector-tag">a</span>&#123;<br> <span class="hljs-attribute">color</span>: 对应颜色码;<br> <span class="hljs-attribute">border-bottom</span>: none;<br> &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;<br>   <span class="hljs-attribute">color</span>: 对应颜色码;<br>   <span class="hljs-selector-tag">text</span>-decoration: underline;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>.post-body p a&#123;</code> 为超链接正常显示的颜色。<br><code>&amp;:hover &#123;</code> 为鼠标悬浮在超链接时的颜色。</p><h2><span id="修改博客字体样式">修改博客字体样式</span></h2><p>打开 <code>博客根目录\themes\next\_config.yml</code> 文件，针对以下内容进行修改。<br>以本博客为例。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">font:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># Uri of fonts host, e.g. https://fonts.googleapis.com (Default).</span><br>  <span class="hljs-attr">host:</span> <span class="hljs-string">https://fonts.loli.net</span><br><br>  <span class="hljs-comment"># Font options:</span><br>  <span class="hljs-comment"># `external: true` will load this font family from `host` above.</span><br>  <span class="hljs-comment"># `family: Times New Roman`. Without any quotes.</span><br>  <span class="hljs-comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span><br><br>  <span class="hljs-comment"># Global font settings used for all elements inside &lt;body&gt;.</span><br>  <span class="hljs-comment"># body元素的字体设置</span><br>  <span class="hljs-attr">global:</span><br>    <span class="hljs-attr">external:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">family:</span> <span class="hljs-string">LXGW</span> <span class="hljs-string">WenKai</span> <span class="hljs-string">Mono</span> <span class="hljs-string">TC</span><br>    <span class="hljs-attr">size:</span> <span class="hljs-number">1.04</span><br>  <br>  <span class="hljs-comment"># 左上角站点名称区的字体设置</span><br>  <span class="hljs-comment"># Font settings for site title (.site-title).</span><br>  <span class="hljs-attr">title:</span><br>    <span class="hljs-attr">external:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">family:</span> <br>    <span class="hljs-attr">size:</span> <br><br>  <span class="hljs-comment"># 标题的基础字体设置</span><br>  <span class="hljs-comment"># Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span><br>  <span class="hljs-attr">headings:</span><br>    <span class="hljs-attr">external:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">family:</span><br>    <span class="hljs-attr">size:</span><br><br>  <span class="hljs-comment"># 文章的字体设置</span><br>  <span class="hljs-comment"># Font settings for posts (.post-body).</span><br>  <span class="hljs-attr">posts:</span><br>    <span class="hljs-attr">external:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">family:</span> <br><br>  <span class="hljs-comment"># 代码块的字体设置</span><br>  <span class="hljs-comment"># Font settings for &lt;code&gt; and code blocks.</span><br>  <span class="hljs-attr">codes:</span><br>    <span class="hljs-attr">external:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">family:</span><br></code></pre></td></tr></table></figure><ol><li>将 <code>font</code> 下的 <code>enable</code> 由<strong>false</strong>改为<strong>true</strong>。</li><li>添加你喜欢的 host ，个人推荐 <code>https://fonts.loli.net</code> ，当然不改也可以，但默认的谷歌字体在某些地区可能不太容易访问。</li><li>修改 <code>family</code> 改变字体样式，修改 <code>size</code> 改变字体大小。</li></ol><h2><span id="修改文章标题样式">修改文章标题样式</span></h2><p>针对首页和文章页面中，对文章标题样式进行修改。<br>打开 <code>博客根目录\source\_data\styles.styl</code> 文件（没有的话就新建一个），在里面添加以下代码。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 首页标题样式 */</span><br><span class="hljs-selector-class">.index</span> <span class="hljs-selector-class">.post-title</span> <span class="hljs-selector-tag">a</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#3a5b52</span>; <span class="hljs-comment">/* 标题颜色 */</span><br>  <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* 确保伪元素相对于标题定位 */</span><br>  <span class="hljs-attribute">text-decoration</span>: none; <span class="hljs-comment">/* 去除默认的下划线 */</span><br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">25px</span>; <span class="hljs-comment">/* 标题字体大小 */</span><br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">550</span>; <span class="hljs-comment">/* 字体粗细 */</span><br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.2</span>; <span class="hljs-comment">/* 行高 */</span><br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>; <span class="hljs-comment">/* 标题下方的外边距 */</span><br>&#125;<br><br><span class="hljs-comment">/* 首页标题下划线样式 */</span><br><span class="hljs-selector-class">.index</span> <span class="hljs-selector-class">.post-title</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">::after</span> &#123;<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">/* 伪元素需要有内容 */</span><br>  <span class="hljs-attribute">display</span>: block; <span class="hljs-comment">/* 伪元素需为块级元素以便展示 */</span><br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">2px</span>; <span class="hljs-comment">/* 横线的高度 */</span><br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3a5b52</span>; <span class="hljs-comment">/* 横线颜色 */</span><br>  <span class="hljs-attribute">position</span>: absolute; <span class="hljs-comment">/* 定位伪元素 */</span><br>  <span class="hljs-attribute">bottom</span>: -<span class="hljs-number">3px</span>; <span class="hljs-comment">/* 横线和标题之间的距离 */</span><br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* 初始宽度为 0 */</span><br>  <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span> ease; <span class="hljs-comment">/* 动画效果 */</span><br>&#125;<br><br><span class="hljs-comment">/* 首页标题悬停效果 */</span><br><span class="hljs-selector-class">.index</span> <span class="hljs-selector-class">.post-title</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">::after</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-comment">/* 鼠标悬停时横线的宽度 */</span><br>&#125;<br><br><span class="hljs-comment">/* 确保其他可能影响横线的伪元素样式被移除 */</span><br><span class="hljs-selector-class">.index</span> <span class="hljs-selector-class">.post-title</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">::before</span> &#123;<br>  <span class="hljs-attribute">content</span>: none; <span class="hljs-comment">/* 确保没有黑色横线 */</span><br>&#125;<br><br><span class="hljs-comment">/* 文章页标题样式 */</span><br><span class="hljs-selector-class">.post</span> <span class="hljs-selector-class">.post-title</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#3a5b52</span> <span class="hljs-meta">!important</span>; <span class="hljs-comment">/* 强制应用颜色 */</span><br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">25px</span> <span class="hljs-meta">!important</span>; <span class="hljs-comment">/* 强制应用字体大小 */</span><br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">550</span> <span class="hljs-meta">!important</span>; <span class="hljs-comment">/* 强制应用字体粗细 */</span><br>&#125;<br></code></pre></td></tr></table></figure><p>以上是该博客的文章标题样式，可按照个人需求，根据注释进行修改。</p><h2><span id="给博客添加-top-文章置顶">给博客添加 top 文章置顶</span></h2><p>添加插件和使用方法请参考JWei Ma大神这篇教程：<a target="_blank" rel="noopener" href="https://zerobio.github.io/archives/5c4c93e2.html">Next 添加 top 文章置顶</a><br>而当我在设置置顶图标时，发现右侧会多出一条竖线，可能JWei Ma大神的教程不适用于 nexT 8.0 版本。<br>于是稍微改了一部分，并且把图标设置在左边，方法如下。<br>打开 <code>博客根目录\themes\next\layout\_partials\post\post-meta.njk</code> 文件，在第一行 <code>&lt;div class=&quot;post-meta&quot;&gt;</code> 下面，添加以下代码。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;% if post.top %&#125;<br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding-left: 8px;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-thumbtack&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">color</span>= <span class="hljs-string">对应颜色码</span> =<span class="hljs-string">&quot;font-weight: bold; padding-left: 4px;&quot;</span>&gt;</span> 置顶 <span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>&#123;% endif %&#125;<br></code></pre></td></tr></table></figure><p>这样就可以正常显示了。</p></div></main></div><script src="/js/broken-image.js?v=1746822968497"></script><footer id="footer" style="margin-top:10px"><p>© 终末地铁. 2021-2025</p></footer></div><script>document.addEventListener("DOMContentLoaded",function(){function r(){var e=document.getElementById("leftColumn"),o=document.querySelector("main");if(e&&o)if(o.style.minHeight="auto",880<window.innerWidth){e=e.offsetHeight;let t=o.scrollHeight;o.querySelectorAll(".post-content .highlight").forEach(e=>{e.classList.contains("collapsed")&&(t-=e.scrollHeight-320)}),t<e?o.style.minHeight=e+"px":o.style.minHeight=t+"px"}else o.style.minHeight="auto"}void 0!==$.fancybox?(console.log("fancybox 已加载，正在初始化..."),$('[data-fancybox="gallery"]').fancybox({loop:!0,buttons:["zoom","slideShow","fullScreen","download","thumbs","close"],protect:!0,image:{preload:!0}}),console.log("找到的灯箱图片数量：",$('[data-fancybox="gallery"]').length),$(".post-content img").each(function(){console.log(`图片尺寸：${this.src} - 宽度=${this.width}px, 高度=${this.height}px`)})):console.error("fancybox 未加载，请检查 head.ejs 中的依赖或网络连接"),"undefined"!=typeof hljs&&config.highlight&&config.highlight.enable&&(hljs.registerLanguage("javascript",window.hljsDefineJavascript),hljs.registerLanguage("css",window.hljsDefineCss),hljs.registerLanguage("scss",window.hljsDefineScss),hljs.initHighlightingOnLoad()),document.querySelectorAll(".post-content figure img, .post-content img").forEach(e=>{var t,o=e.getAttribute("src");!o||o.startsWith("http")||o.startsWith("/")||(t="/"+"2024/07/16/Hexo-NexT-博客主题美化/".replace(/\/[^/]*$/,"")+"/"+o,e.src=t,(e=e.parentElement)&&"A"===e.tagName&&e.hasAttribute("data-fancybox")&&(e.href=t),console.log(`图片路径修正：${o} -> `+t))});document.querySelectorAll(".post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6").forEach((e,t)=>{var o;e.id||(t=(o=e.textContent.trim())?o.toLowerCase().replace(/[^\w-]+/g,"-").replace(/-+/g,"-"):"header-"+t,e.id=t,console.log(`为标题生成ID: ${e.tagName} - ${o} -> `+t))});var e=document.querySelector(".post-content .toc");e?(e=e.querySelectorAll("a"),console.log(`找到 ${e.length} 个目录链接`),e.forEach((e,t)=>{let o=e.getAttribute("href");o?e.addEventListener("click",function(e){e.preventDefault();let t=o.startsWith("#")?o.slice(1):o;try{t=decodeURIComponent(t)}catch(e){console.warn("解码 href 失败: "+o)}e=document.getElementById(t);e?(window.scrollTo({top:e.getBoundingClientRect().top+window.scrollY-70,behavior:"smooth"}),console.log("跳转到: "+t)):console.warn("未找到目标元素: "+t)}):console.warn(`目录链接 ${t} 缺少 href 属性`)})):console.warn("未找到 .toc 容器，目录可能未生成");let d=320;document.querySelectorAll(".post-content .highlight").forEach((n,e)=>{if(!n.__render__){n.__render__=!0;var l=document.createElement("div"),s=(l.className="highlight-container",n.parentNode.insertBefore(l,n),l.appendChild(n),document.createElement("div"));s.className="button-container",l.appendChild(s);let t=document.createElement("button");t.className="copy-button",t.textContent="复制",s.appendChild(t);l=n.querySelector(".code pre code");let o=l?l.innerText:"";t.addEventListener("click",()=>{var e;navigator.clipboard?navigator.clipboard.writeText(o).then(()=>{t.textContent="已复制",setTimeout(()=>t.textContent="复制",2e3)}).catch(e=>console.error("复制失败:",e)):((e=document.createElement("textarea")).value=o,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),t.textContent="已复制",setTimeout(()=>t.textContent="复制",2e3))});var c,l=n.querySelector(".gutter pre"),a=n.querySelector(".code pre"),i=(l&&a&&(c=l.scrollHeight,i=a.scrollHeight,c=Math.max(c,i),l.style.height=c+"px",a.style.height=c+"px"),n.scrollHeight);if(i>d){let e=document.createElement("button"),t=(e.className="toggle-button",e.textContent="展开",s.appendChild(e),n.classList.add("collapsed"),n.style.maxHeight=d+"px",!(n.style.overflowY="hidden"));e.addEventListener("click",()=>{t||(t=!0,n.classList.contains("collapsed")?(n.classList.remove("collapsed"),n.classList.add("expanded"),e.textContent="收起",n.style.maxHeight=n.scrollHeight+"px",n.style.overflowY="auto"):(n.classList.remove("expanded"),n.classList.add("collapsed"),e.textContent="展开",n.style.maxHeight=d+"px",n.style.overflowY="hidden",window.scrollTo({top:n.getBoundingClientRect().top+window.scrollY-d,behavior:"smooth"})),setTimeout(()=>{r(),t=!1},400))})}else n.classList.add("expanded"),n.style.maxHeight="none",n.style.overflowY="auto"}}),r(),window.addEventListener("resize",r)})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/nico.model.json"},display:{position:"left",width:250,height:300},mobile:{show:!1},react:{opacity:.7},log:!1})</script></body></html>